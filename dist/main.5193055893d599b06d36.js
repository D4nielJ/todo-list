(()=>{"use strict";class t{constructor(t=null,e="",s=!1){this.index=t,this.desc=e,this.completed=s}complete=()=>{!1===this.completed?this.completed=!0:this.completed=!1};edit=t=>{this.desc=t}}const e=new class{saveData=t=>{localStorage.clear(),localStorage.setItem("userData",JSON.stringify(t))};loadData=()=>{if((t=>{let e;try{e=window[t];const s="__storage_test__";return e.setItem(s,s),e.removeItem(s),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length}})("localStorage")&&0!==localStorage.length){return JSON.parse(localStorage.getItem("userData"))}return null}};const s=new class{constructor(){this.arr=[]}evaluateIndex=(t,e=0)=>t<0||t>this.arr.length+e;reorderIndex=()=>{let t=0;this.arr.forEach((e=>{e.index=t,t+=1}))};addTask=(s,a=!1)=>{const r=new t(this.arr.length,s,a);this.arr=this.arr.concat(r),e.saveData(this.arr)};getTask=t=>{if(this.evaluateIndex(t))return this.evaluateIndex(t);return this.arr[t]};removeTask=t=>{if(this.evaluateIndex(t))return this.evaluateIndex(t);const[s]=this.arr.filter((e=>e.index===t));return this.arr=this.arr.filter((e=>e.index!==t)),this.reorderIndex(),e.saveData(this.arr),s};addTaskAt=(t,s=0)=>{if(this.evaluateIndex(s,1))return this.evaluateIndex(s,1);const a=t;return a.index=s,this.arr.splice(s,0,a),this.reorderIndex(),e.saveData(this.arr),a};completeTask=t=>{if(this.evaluateIndex(t))return this.evaluateIndex(t);const s=this.getTask(t);return s.complete(),e.saveData(this.arr),s};editTask=(t,s)=>{if(this.evaluateIndex(t))return this.evaluateIndex(t);const a=this.getTask(t);return a.edit(s),e.saveData(this.arr),a};clearCompleted=()=>{this.arr.forEach(((t,e)=>{!0===t.completed&&(this.arr=this.arr.filter((t=>t.index!==e)))})),this.reorderIndex(),e.saveData(this.arr)};init=()=>{if(e.loadData()){e.loadData().forEach((t=>{this.addTask(t.desc,t.completed)}))}}};function a(t,e){const s=document.createElement("li"),a=e.getTask(t);let r="",d="";return!0===a.completed&&(r="checked",d="todo-list__desc--done"),s.innerHTML=`\n    <div class="todo-list__desc-container">\n      <input\n        type="checkbox"\n        class="todo-list__completed"\n        ${r}\n      />\n      <p\n        contenteditable="true"\n        class="todo-list__desc ${d}"\n      >${a.desc}</p>\n    </div>\n    <div class="todo-list__grab grabber">\n      <span class="grabber__circle"></span>\n    </div>\n    <button type="button" class="todo-list__delete fas fa-trash">\n    </button>\n    <div data-index-target="${a.index+1}" class="todo-list__target"></div>\n    `,s.classList.add("todo-list__item"),s.setAttribute("data-index",`${a.index}`),s.setAttribute("data-desc",`${a.desc}`),s.setAttribute("draggable","true"),s}function r(t){const e=document.querySelector(".todo-list");e.innerHTML="";const s=document.createElement("li");if(s.innerHTML='<div data-index-target="0" class="todo-list__start-target"></div>',s.classList.add("todo-list__start"),e.appendChild(s),0===t.arr.length){const t=document.createElement("div");t.classList.add("todo-list__empty"),t.innerHTML="Your list is empty | Add new tasks to start",e.appendChild(t)}else for(let s=0;s<t.arr.length;s+=1){const r=a(s,t);e.appendChild(r)}}const d=new class{addEvents=()=>{const t=Array.from(document.querySelectorAll(".todo-list__completed"));t.forEach((e=>{e.addEventListener("change",(()=>{s.completeTask(t.indexOf(e))}))}))}};const n=new class{tasks;addListener=()=>{this.tasks=document.querySelectorAll(".todo-list__desc"),this.tasks.forEach((t=>{t.addEventListener("blur",(()=>{const e=t.textContent,s=parseInt(t.parentElement.parentElement.getAttribute("data-index"),10);this.editTask(s,e)}))}))};editTask=(t,e)=>{s.editTask(t,e)}};const o=new class{addListener=()=>{document.querySelectorAll(".todo-list__delete").forEach((t=>{t.addEventListener("click",(()=>{const e=parseInt(t.parentElement.getAttribute("data-index"),10);this.deleteTask(e)}))}))};deleteTask=t=>{s.removeTask(t),r(s),h()}};function i(){(()=>{const t=document.querySelector(".card__add-task"),e=document.querySelector(".card__submit");t.addEventListener("focus",(()=>{e.classList.add("card__submit--active")})),t.addEventListener("blur",(()=>{e.classList.remove("card__submit--active")}))})(),(()=>{const t=Array.from(document.querySelectorAll(".todo-list__item")),e=Array.from(document.querySelectorAll(".todo-list__desc")),s=Array.from(document.querySelectorAll(".todo-list__delete")),a=Array.from(document.querySelectorAll(".todo-list__grab"));e.forEach(((e,r)=>{e.addEventListener("focus",(()=>{s[r].classList.add("todo-list__delete--active"),a[r].classList.add("d-none"),t[r].classList.add("todo-list__item--active"),t[r].setAttribute("draggable","false")})),e.addEventListener("blur",(()=>{setTimeout((()=>{s[r].classList.remove("todo-list__delete--active"),a[r].classList.remove("d-none")}),300),t[r].classList.remove("todo-list__item--active"),t[r].setAttribute("draggable","true")}))}))})(),(()=>{const t=Array.from(document.querySelectorAll(".todo-list__desc"));Array.from(document.querySelectorAll(".todo-list__completed")).forEach(((e,s)=>{e.addEventListener("change",(()=>{e.checked?t[s].classList.add("todo-list__desc--done"):t[s].classList.remove("todo-list__desc--done")}))}))})()}const l=new class{targetsArray=[];droppedOn;startIndex;taskDragged;selectTargets=()=>{const t=document.querySelector(".todo-list__start-target"),e=Array.from(document.querySelectorAll(".todo-list__target"));this.targetsArray=[t].concat(e)};dragStart=t=>{this.droppedOn=parseInt(t.getAttribute("data-index"),10),this.startIndex=this.droppedOn,t.classList.add("todo-list__item--hold"),this.selectTargets(),this.targetsArray.forEach((t=>{t.classList.add("z-10")})),t.classList.add("todo-list__item--hold")};dragEnd=t=>{this.taskDragged=s.removeTask(parseInt(t.getAttribute("data-index"),10)),this.startIndex<this.droppedOn&&(this.droppedOn-=1),s.addTaskAt(this.taskDragged,this.droppedOn),t.classList.remove("todo-list__item--hold"),r(s),d.addEvents(),n.addListener(),o.addListener(),this.addEvents(),this.addEventsToTargets(),i()};dragOver=t=>{this.droppedOn=parseInt(t.currentTarget.getAttribute("data-index-target"),10)};addEvents=()=>{Array.from(document.querySelectorAll(".todo-list__item")).forEach((t=>{t.addEventListener("dragstart",(()=>{this.dragStart(t)})),t.addEventListener("dragend",(()=>{this.dragEnd(t)}))}))};addEventsToTargets=()=>{this.selectTargets(),this.targetsArray.forEach((t=>{t.addEventListener("dragenter",this.dragOver)}))}};const c=new class{form;addListener=()=>{this.form=document.querySelector("form"),this.form.addEventListener("submit",this.addTask)};addTask=t=>{t.preventDefault(),s.addTask(this.form.newtask.value),this.form.reset(),r(s),h()}};const u=new class{addListener=()=>{document.querySelector(".todo-list__clear").addEventListener("click",this.clearCompleted)};clearCompleted=()=>{s.clearCompleted(),r(s),h()}};function h(){d.addEvents(),l.addEvents(),l.addEventsToTargets(),c.addListener(),n.addListener(),o.addListener(),u.addListener(),i()}window.onload=function(){s.init(),r(s),h(),i()}})();
//# sourceMappingURL=main.5193055893d599b06d36.js.map